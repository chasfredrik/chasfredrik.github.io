{"version":3,"sources":["ApiContext.jsx","ErrorBoundary.jsx","ErrorContext.jsx","BusStop.jsx","Home.jsx","Stop.jsx","App.jsx","reportWebVitals.js","index.jsx"],"names":["ApiContext","React","createContext","ErrorBoundary","props","state","hasError","this","children","error","console","log","Component","ErrorContext","ErrorText","SetErrorText","BusStop","stop","history","useHistory","useState","nextDeparture","setNextDeparture","client","useContext","errorContext","siteId","mainMastExtId","substring","useEffect","GetNextDeparture","then","res","err","setErrorMsg","Text","Error","message","className","onClick","push","name","dist","NextDeparture","NextDep","undefined","length","DisplayTime","Badge","pill","variant","LineNumber","Destination","ListBusStops","Lista","data-testid","map","index","StopLocation","Home","location","setLocation","stopList","setStopList","useLocation","setUseLocation","errorMsg","address","setAddress","showAddressAlternatives","setShowAddressAlternatives","target","useRef","event","a","value","LookupPlaces","UpdateStopInfo","Provider","Container","Row","Col","xs","md","type","id","checked","onChange","navigator","geolocation","getCurrentPosition","position","coords","code","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","htmlFor","hidden","placeholder","ref","Overlay","show","current","placement","containerPadding","Popover","Content","key","Name","HandleAddressChosen","Type","Object","keys","Alert","dismissible","onClose","site","latitude","Y","longitude","X","Stop","nextStops","match","params","context","setState","siteName","colSpan","contextType","Departure","SlApiClient","apiKey_realtimeInfo","CONFIG","APIKEY_REALTIMEINFO","apiKey_nearMe","APIKEY_NEARME","apiKey_location","APIKEY_LOCATION","App","path","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1461fc2e.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst ApiContext = React.createContext({});\r\n\r\nexport default ApiContext;\r\n","import React from \"react\";\r\n\r\nexport default class ErrorBoundary extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n\r\n  static getDerivedStateFromError(error) {\r\n    // Update state so the next render will show the fallback UI.\r\n    console.log(\"An unhandled error occurred,\", error);\r\n    return { hasError: true };\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      // You can render any custom fallback UI\r\n      return <h4>H&auml;r &auml;r det tyv&auml;rr lite trasigt</h4>;\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n","import React from \"react\";\r\n\r\nconst ErrorContext = React.createContext({\r\n  ErrorText: \"\",\r\n  SetErrorText: () => {},\r\n});\r\n\r\nexport default ErrorContext;\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Badge } from \"react-bootstrap\";\r\n\r\nimport ErrorBoundary from \"./ErrorBoundary\";\r\nimport ErrorContext from \"./ErrorContext\";\r\nimport ApiContext from \"./ApiContext\";\r\n\r\nfunction ListBusStops({ Lista }) {\r\n  if (Lista === null || Lista === undefined) return null;\r\n\r\n  return (\r\n    <table className=\"table table-hover\">\r\n      <thead data-testid=\"table-header\">\r\n        <tr className=\"table-primary\">\r\n          <th>Avstånd</th>\r\n          <th>Hållplats</th>\r\n          <th>Nästa avgång</th>\r\n          <th>Destination</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {Lista.map((stop, index) => (\r\n          <ErrorBoundary key={index}>\r\n            <BusStop stop={stop.StopLocation} />\r\n          </ErrorBoundary>\r\n        ))}\r\n      </tbody>\r\n    </table>\r\n  );\r\n}\r\n\r\nexport function BusStop({ stop }) {\r\n  const history = useHistory();\r\n  const [nextDeparture, setNextDeparture] = useState(\"-\");\r\n  const client = useContext(ApiContext);\r\n  const errorContext = useContext(ErrorContext);\r\n\r\n  var siteId = stop.mainMastExtId.substring(5);\r\n\r\n  useEffect(() => {\r\n    function SetError(error) {\r\n      errorContext.setErrorMsg({\r\n        Text: \"Misslyckades med att hämta avgångar\",\r\n        Error: error.message,\r\n      });\r\n    }\r\n\r\n    client.GetNextDeparture(siteId).then(\r\n      (res) => {\r\n        setNextDeparture(res);\r\n      },\r\n      (err) => SetError(err)\r\n    );\r\n  }, [client, siteId]);\r\n\r\n  return (\r\n    <tr\r\n      className=\"pointer\"\r\n      onClick={() => history.push(`/stop/${siteId}/${stop.name}`)}\r\n    >\r\n      <td>{stop.dist} m</td>\r\n      <td>{stop.name}</td>\r\n      <ErrorBoundary>\r\n        <NextDeparture NextDep={nextDeparture} />\r\n      </ErrorBoundary>\r\n    </tr>\r\n  );\r\n}\r\n\r\nexport function NextDeparture({ NextDep }) {\r\n  if (NextDep === undefined || NextDep === null || NextDep.length === 0)\r\n    return (\r\n      <td>\r\n        <b>-</b>\r\n      </td>\r\n    );\r\n\r\n  return (\r\n    <>\r\n      <td>{NextDep[0].DisplayTime}</td>\r\n      <td>\r\n        <Badge pill variant=\"danger\">\r\n          {NextDep[0].LineNumber}\r\n        </Badge>{\" \"}\r\n        {NextDep[0].Destination}\r\n      </td>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ListBusStops;\r\n","import React, { useEffect, useState, useRef, useContext } from \"react\";\nimport { Container, Row, Col, Alert, Overlay, Popover } from \"react-bootstrap\";\n\nimport ErrorBoundary from \"./ErrorBoundary\";\nimport ErrorContext from \"./ErrorContext\";\nimport ApiContext from \"./ApiContext\";\nimport ListBusStops from \"./BusStop\";\n\nfunction Home() {\n  const [location, setLocation] = useState(null);\n  const [stopList, setStopList] = useState([]);\n  const [useLocation, setUseLocation] = useState(false);\n  const [errorMsg, setErrorMsg] = useState({});\n  const [address, setAddress] = useState(\"\");\n  const [showAddressAlternatives, setShowAddressAlternatives] = useState([]);\n  const target = useRef(null);\n  const client = useContext(ApiContext);\n\n  useEffect(() => {\n    if (location !== null) {\n      client.UpdateStopInfo(location).then(\n        (res) => {\n          setStopList(res);\n        },\n        (err) => {\n          setErrorMsg({\n            Text: \"Misslyckades med att hämta hållplatser\",\n            Error: err.message,\n          });\n        }\n      );\n    }\n  }, [client, location]);\n\n  function HandleUseLocationChanged(event) {\n    if (event.target.checked) {\n      setStopList([]);\n      FetchUserLocation();\n    } else {\n      setUseLocation(false);\n      setLocation(null);\n    }\n  }\n\n  async function HandleAddressChange(event) {\n    if (event.target.value.length === 0) return;\n\n    var address = event.target.value;\n\n    setAddress(address);\n\n    if (address.length > 2) {\n      // Visa alternativen\n      client.LookupPlaces(address).then(\n        (res) => setShowAddressAlternatives(res),\n        (err) =>\n          setErrorMsg({\n            Text: \"Misslyckades med att hämta adresser\",\n            Error: err.message,\n          })\n      );\n    }\n  }\n\n  return (\n    <>\n      <ErrorContext.Provider value={{ errorMsg, setErrorMsg }}>\n        <Container>\n          <Row>\n            <Col>\n              <div className=\"jumbotron\">\n                <h1>När går nästa buss?</h1>\n              </div>\n            </Col>\n          </Row>\n          <Row>\n            <Col xs=\"6\" md=\"3\">\n              <div className=\"custom-control custom-switch\">\n                <input\n                  type=\"checkbox\"\n                  className=\"custom-control-input\"\n                  id=\"customSwitch1\"\n                  checked={useLocation}\n                  onChange={HandleUseLocationChanged}\n                />\n                <label className=\"custom-control-label\" htmlFor=\"customSwitch1\">\n                  Använd min plats\n                </label>\n              </div>\n            </Col>\n            <Col xs=\"6\" md=\"4\">\n              <div className=\"form-group\" hidden={useLocation}>\n                <input\n                  data-testid=\"Adress\"\n                  className=\"form-control form-control-sm\"\n                  type=\"text\"\n                  placeholder=\"Adress\"\n                  id=\"inputSmall\"\n                  value={address}\n                  onChange={HandleAddressChange}\n                  ref={target}\n                />\n              </div>\n              <ErrorBoundary>\n                <Overlay\n                  show={showAddressAlternatives.length > 0}\n                  target={target.current}\n                  placement=\"bottom\"\n                  containerPadding={20}\n                >\n                  <Popover id=\"popover-contained\">\n                    <Popover.Content>\n                      {showAddressAlternatives.map((address, key) => {\n                        return (\n                          <div\n                            key={key}\n                            className=\"pointer\"\n                            onClick={() => {\n                              setAddress(address.Name);\n                              HandleAddressChosen(address);\n                            }}\n                          >\n                            {address.Type === \"Station\" ? \"(H) \" : \"\"}\n                            {address.Name}\n                          </div>\n                        );\n                      })}\n                    </Popover.Content>\n                  </Popover>\n                </Overlay>\n              </ErrorBoundary>\n            </Col>\n          </Row>\n          <Row hidden={Object.keys(errorMsg).length === 0}>\n            <Col xs=\"6\">\n              <Alert\n                variant=\"danger\"\n                dismissible\n                onClose={() => setErrorMsg({})}\n              >\n                <strong>{errorMsg.Text}</strong>\n                <br />\n                <i>{errorMsg.Error}</i>\n              </Alert>\n            </Col>\n          </Row>\n          <Row>\n            <Col>\n              <ErrorBoundary>\n                <ListBusStops Lista={stopList}></ListBusStops>\n              </ErrorBoundary>\n            </Col>\n          </Row>\n        </Container>\n      </ErrorContext.Provider>\n    </>\n  );\n\n  function FetchUserLocation() {\n    navigator.geolocation.getCurrentPosition(\n      function (position) {\n        setUseLocation(true);\n        setLocation(position.coords);\n      },\n      function (error) {\n        switch (error.code) {\n          case error.PERMISSION_DENIED:\n            setErrorMsg({ Text: \"Saknar behörighet att hämta din position\" });\n            break;\n          case error.POSITION_UNAVAILABLE:\n            setErrorMsg({ Text: \"Kunde ej hämta din position\" });\n            break;\n          case error.TIMEOUT:\n            setErrorMsg({ Text: \"Kunde ej hämta din position\" });\n            break;\n          default:\n        }\n      }\n    );\n  }\n\n  async function HandleAddressChosen(site) {\n    setShowAddressAlternatives([]);\n    setStopList([]);\n    client\n      .UpdateStopInfo({\n        latitude: site.Y.substring(0, 2) + \".\" + site.Y.substring(2),\n        longitude: site.X.substring(0, 2) + \".\" + site.X.substring(2),\n      })\n      .then((res) => {\n        setStopList(res);\n      });\n  }\n}\n\nexport default Home;\n","import React from \"react\";\r\nimport { Container, Row, Col, Alert, Badge } from \"react-bootstrap\";\r\n\r\nimport ErrorBoundary from \"./ErrorBoundary\";\r\nimport ApiContext from \"./ApiContext\";\r\n\r\nclass Stop extends React.Component {\r\n  static contextType = ApiContext;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { errorMsg: {}, nextStops: [] };\r\n  }\r\n\r\n  componentDidMount() {\r\n    var siteId = this.props.match.params.siteId;\r\n\r\n    try {\r\n      this.context\r\n        .GetNextDeparture(siteId)\r\n        .then((res) =>\r\n          this.setState((state) => ({ ...state, nextStops: res }))\r\n        );\r\n    } catch (err) {\r\n      this.setState((state) => ({\r\n        ...state,\r\n        errorMsg: {\r\n          Text: \"Misslyckades med att hämta avgångar\",\r\n          Error: err.message,\r\n        },\r\n      }));\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const ClearError = () => {\r\n      this.setState((state) => ({\r\n        ...state,\r\n        errorMsg: {},\r\n      }));\r\n    };\r\n\r\n    return (\r\n      <Container>\r\n        <Row>\r\n          <Col>\r\n            <div className=\"jumbotron\">\r\n              <h4>När går nästa buss från</h4>\r\n              <h1>{this.props.match.params.siteName}</h1>\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n        <Row hidden={Object.keys(this.state.errorMsg).length === 0}>\r\n          <Col xs=\"6\">\r\n            <Alert variant=\"danger\" dismissible onClose={ClearError}>\r\n              <strong>{this.state.errorMsg.Text}</strong>\r\n              <br />\r\n              <i>{this.state.errorMsg.Error}</i>\r\n            </Alert>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col>\r\n            <table className=\"table table-hover\">\r\n              <thead>\r\n                <tr className=\"table-primary\">\r\n                  <th>Avgång</th>\r\n                  <th>Linje</th>\r\n                  <th>Destination</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {this.state.nextStops.map((stop, index) => (\r\n                  <ErrorBoundary key={index}>\r\n                    <Departure stop={stop} />\r\n                  </ErrorBoundary>\r\n                ))}\r\n                {this.state.nextStops.length === 0 ? (\r\n                  <tr>\r\n                    <td colSpan=\"4\">Inga avgångar närmaste timmen</td>\r\n                  </tr>\r\n                ) : null}\r\n              </tbody>\r\n            </table>\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nclass Departure extends React.Component {\r\n  render() {\r\n    var stop = this.props.stop;\r\n\r\n    return (\r\n      <tr>\r\n        <td>{stop.DisplayTime}</td>\r\n        <td>\r\n          <Badge pill variant=\"danger\">\r\n            {stop.LineNumber}\r\n          </Badge>\r\n        </td>\r\n        <td>{stop.Destination}</td>\r\n      </tr>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Stop;\r\n","import React from \"react\";\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\nimport SlApiClient from \"@happycoderse/js-sl-api\";\n\nimport ApiContext from \"./ApiContext\";\nimport Home from \"./Home\";\nimport Stop from \"./Stop\";\n\nimport \"./custom.css\";\nimport CONFIG from \"./config.json\";\n\nconst client = new SlApiClient({\n  apiKey_realtimeInfo: CONFIG.APIKEY_REALTIMEINFO,\n  apiKey_nearMe: CONFIG.APIKEY_NEARME,\n  apiKey_location: CONFIG.APIKEY_LOCATION,\n});\n\nfunction App() {\n  if (!CONFIG.APIKEY_REALTIMEINFO)\n    return <h2>Missing APIKEY_REALTIMEINFO in config.json</h2>;\n\n  if (!CONFIG.APIKEY_NEARME)\n    return <h2>Missing APIKEY_NEARME in config.json</h2>;\n\n  if (!CONFIG.APIKEY_LOCATION)\n    return <h2>Missing APIKEY_LOCATION in config.json</h2>;\n\n  return (\n    <ApiContext.Provider value={client}>\n      <BrowserRouter>\n        <Switch>\n          <Route path=\"/stop/:siteId/:siteName\" component={Stop}></Route>\n          <Route>\n            <Home />\n          </Route>\n        </Switch>\n      </BrowserRouter>\n    </ApiContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"bootswatch/dist/superhero/bootstrap.min.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}